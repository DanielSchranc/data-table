{"version":3,"sources":["root.module.js","common/app.module.js","components/components.module.js","components/callcenter/callcenter.module.js","root.component.js","common/storage.service.js","components/callcenter/callcenter-api.service.js","components/callcenter/callcenter.service.js","components/callcenter/table-search/table-search.component.js","components/callcenter/table-search/table-search.controller.js","components/callcenter/table/table.component.js","components/callcenter/table/table.controller.js","components/callcenter/table-row/table-row.component.js","components/callcenter/table-row/table-row.controller.js","templates.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["angular\r\n  .module('root', [\r\n    'common',\r\n    'components',\r\n    'templates'\r\n  ]);","angular\r\n  .module('common', []);","angular\r\n  .module('components', [\r\n    'components.callcenter'\r\n  ]);","angular\r\n  .module('components.callcenter', [\r\n    'ngStorage'\r\n  ])\r\n  .constant('CONFIG', {\r\n    API: {\r\n      CALLS: 'https://data.gov.sk/api/3/action/datastore_search'\r\n    },\r\n    PRELOAD_RESOURCE: {\r\n      \"resource_group_id\": \"069a1c5e-7243-4e69-844d-f7cfc41e277e\",\r\n      \"data_correctness\": \"correct and exact\",\r\n      \"maintainer\": \"2DF13D50-0B6F-48BA-884E-BE66DC0A2934\",\r\n      \"periodicity\": \"annually\",\r\n      \"cache_last_updated\": null,\r\n      \"webstore_last_updated\": null,\r\n      \"datastore_active\": true,\r\n      \"id\": \"c2098147-16f3-41fc-acee-638a31bf3bbf\",\r\n      \"size\": null,\r\n      \"valid_from\": \"\",\r\n      \"validity_description\": \"\",\r\n      \"state\": \"active\",\r\n      \"transformed\": false,\r\n      \"last_modified\": null,\r\n      \"on_same_domain\": true,\r\n      \"schema\": \"\",\r\n      \"status\": \"public\",\r\n      \"periodicity_description\": \"\",\r\n      \"hash\": \"\",\r\n      \"description\": \"\",\r\n      \"format\": \"CSV\",\r\n      \"validity\": \"perm_valid\",\r\n      \"tracking_summary\": { \"total\": 1, \"recent\": 1 },\r\n      \"mimetype_inner\": null,\r\n      \"url_type\": \"upload\",\r\n      \"active_to\": \"\",\r\n      \"data_correctness_description\": \"\",\r\n      \"active_from\": \"\",\r\n      \"mimetype\": null,\r\n      \"cache_url\": null,\r\n      \"name\": \"Pocty volan\\u00ed 112 za rok 2016\",\r\n      \"created\": \"2017-03-31T13:07:48.717885\",\r\n      \"url\": \"https://data.gov.sk/dataset/ec254f6d-ba3b-4abc-9ae5-6e6bc3b68e00/resource/c2098147-16f3-41fc-acee-638a31bf3bbf/download/poctyvolaniltv112zarok2016.csv\",\r\n      \"valid_to\": \"\",\r\n      \"webstore_url\": null,\r\n      \"position\": 0,\r\n      \"revision_id\": \"06cb0d82-bc67-4b01-b74b-fc36ee053d12\",\r\n      \"resource_type\": null\r\n    }\r\n  });\r\n","var root = {\r\n  templateUrl: './root.html'\r\n};\r\n\r\nangular\r\n  .module('root')\r\n  .component('root', root);","function StorageService($localStorage) {\r\n  $localStorage = $localStorage.$default({\r\n    items: []\r\n  });\r\n\r\n  function add(item) {\r\n    $localStorage.items = item;\r\n  }\r\n\r\n  function getAll() {\r\n    return $localStorage.items;\r\n  };\r\n\r\n  function remove(item) {\r\n    $localStorage.items.splice($localStorage.items.indexOf(item), 1);\r\n  }\r\n\r\n  function removeAll() {\r\n    $localStorage.$reset();\r\n  }\r\n\r\n  // Public API\r\n  return {\r\n    add: add,\r\n    getAll: getAll,\r\n    remove: remove,\r\n    removeAll: removeAll\r\n  };\r\n}\r\nangular\r\n  .module('common')\r\n  .factory('StorageService', StorageService);\r\n","function CallcenterAPIService($http, StorageService, CONFIG) {\r\n  var api = CONFIG.API.CALLS;\r\n  var data = CONFIG.PRELOAD_RESOURCE;\r\n  var records = [];\r\n\r\n  this.getEmergencyCalls = function() {\r\n    return $http\r\n      .post(api, data)\r\n      .then(function(response) {\r\n        records = response.data.result.records;\r\n        return records;\r\n      }, function(reason) {\r\n        console.error('Error: CallcenterAPIService: ', reason);\r\n      });\r\n  }\r\n\r\n}\r\n\r\nangular\r\n  .module('components.callcenter')\r\n  .service('CallcenterAPIService', CallcenterAPIService);\r\n","function CallcenterService(CallcenterAPIService) {\r\n\r\n  var identifiers = [\r\n    { id: 'Banská Bystrica' },\r\n    { id: 'Bratislava' },\r\n    { id: 'Koice' },\r\n    { id: 'Nitra' },\r\n    { id: 'Preov' },\r\n    { id: 'Trenčín' },\r\n    { id: 'Trnava' },\r\n    { id: \"ilina\" }\r\n  ];\r\n\r\n  function getFilteredArray(array, idArray) {\r\n    var newArray = [];\r\n    idArray.forEach(function(item) {\r\n      var filtered = [];\r\n      filtered = array.filter(function(value) {\r\n        return value.Callcentername === item.id;\r\n      });\r\n      newArray.push(filtered);\r\n    });\r\n    return newArray;\r\n  }\r\n\r\n  var getTransformedData = function() {\r\n    return CallcenterAPIService\r\n      .getEmergencyCalls()\r\n      .then(function(response) {\r\n        // Returns new array of arrays for each city\r\n        return getFilteredArray(response, identifiers);\r\n      });\r\n  }\r\n\r\n  return {\r\n    getData: getTransformedData\r\n  }\r\n}\r\n\r\nangular\r\n  .module('components.callcenter')\r\n  .factory('CallcenterService', CallcenterService);\r\n","var callcenterTableSearch = {\r\n  templateUrl: './table-search.html',\r\n  controller: 'CallcenterTableSearchController'\r\n};\r\n\r\nangular\r\n  .module('components.callcenter')\r\n  .component('callcenterTableSearch', callcenterTableSearch);","function CallcenterTableSearchController() {\r\n  var ctrl = this;\r\n  ctrl.searchFilter = '';\r\n};\r\n\r\nangular\r\n  .module('components.callcenter')\r\n  .controller('CallcenterTableSearchController', CallcenterTableSearchController);","var callcenterTable = {\r\n  templateUrl: './table.html',\r\n  controller: 'CallcenterTableController'\r\n};\r\n\r\nangular\r\n  .module('components.callcenter')\r\n  .component('callcenterTable', callcenterTable);","function CallcenterTableController(StorageService, CallcenterService) {\r\n  var ctrl = this;\r\n  ctrl.CallsData = [];\r\n\r\n  function storeCallcenterData(response) {\r\n    ctrl.CallsData = response;\r\n    if (!StorageService.getAll().length) {\r\n      StorageService.add(ctrl.CallsData);\r\n    }\r\n  }\r\n\r\n  function getCallcenterData() {\r\n    CallcenterService\r\n    .getData()\r\n    .then(storeCallcenterData);\r\n  }\r\n\r\n  function getCallcenterDataFromStorage() {\r\n    if (navigator.onLine) {\r\n      getCallcenterData();\r\n    } else {\r\n      ctrl.CallsData = StorageService.getAll();\r\n    }\r\n  }\r\n\r\n  getCallcenterDataFromStorage();\r\n\r\n};\r\n\r\nangular\r\n  .module('components.callcenter')\r\n  .controller('CallcenterTableController', CallcenterTableController);\r\n","var callcenterTableRow = {\r\n  bindings: {\r\n    cities: '<'\r\n  },\r\n  templateUrl: './table-row.html',\r\n  controller: 'CallcenterTableRowController'\r\n};\r\n\r\nangular\r\n  .module('components.callcenter')\r\n  .component('callcenterTableRow', callcenterTableRow);","function CallcenterTableRowController() {\r\n  var ctrl = this;\r\n  ctrl.getTotal = function(array, key) {\r\n  \tvar total = 0;\r\n  \tarray.forEach(function(item) {\r\n  \t\ttotal += parseInt(item[key]);\r\n  \t});\r\n  \treturn total;\r\n  }\r\n};\r\n\r\nangular\r\n  .module('components.callcenter')\r\n  .controller('CallcenterTableRowController', CallcenterTableRowController);\r\n","angular.module('templates', []).run(['$templateCache', function($templateCache) {$templateCache.put('./root.html','<div class=\"root\"><header><h1>Emergency calls statistics per year 2016</h1></header><callcenter-table></callcenter-table></div>');\n$templateCache.put('./table.html','<div class=\"calls-table\"><!-- <callcenter-table-search></callcenter-table-search> --><ul class=\"calls-table__list\"><li ng-repeat=\"cities in $ctrl.CallsData\"><callcenter-table-row cities=\"cities\"></callcenter-table-row></li></ul></div>');\n$templateCache.put('./table-row.html','<ul class=\"calls-table__list--data\"><li>City:</li><li>Month:</li><li>Identified:</li><li>Not Identified:</li><li>All:</li><li>Answered:</li><li>Justified:</li></ul><ul ng-repeat=\"item in $ctrl.cities | filter as filtered\" class=\"calls-table__list--data\"><li><span>{{item.Callcentername}}</span></li><li><span>{{item.mesiac}}</span></li><li><span>{{item.Identifikovane}}</span></li><li><span>{{item.Neidentifikovane}}</span></li><li><span>{{item.Vsetky}}</span></li><li><span>{{item.Zdvihnute}}</span></li><li><span>{{item.Opravnene}}</span></li><ul><li></li></ul></ul><ul class=\"calls-table__list--total\"><li>Total per year:</li><li>&nbsp;</li><li>{{$ctrl.getTotal(filtered, \\'Identifikovane\\')}}</li><li>{{$ctrl.getTotal(filtered, \\'Neidentifikovane\\')}}</li><li>{{$ctrl.getTotal(filtered, \\'Vsetky\\')}}</li><li>{{$ctrl.getTotal(filtered, \\'Zdvihnute\\')}}</li><li>{{$ctrl.getTotal(filtered, \\'Opravnene\\')}}</li></ul>');\n$templateCache.put('./table-search.html','<div class=\"calls-table__search\"><label>Type and search <input type=\"text\" placeholder=\"Search city\" ng-model=\"searchFilter\"></label></div>');}]);"]}